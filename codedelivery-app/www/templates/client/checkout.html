<ion-view>

    <ion-nav-title> Pedido </ion-nav-title>
	<div class="bar bar-subheader">
        <button class="button button-icon ion-plus-circled" ng-click="openListProducts()"></button>
        <h2 class="title">
			Total: R$ {{ total }}
		</h2>
        <button class="button button-icon"
                ng-click="showDelete = !showDelete"
                ng-class="{'ion-minus': showDelete,'ion-minus-circled': !showDelete}"></button>
	</div>
    <ion-content class="padding has-subheader">
        <ion-list  show-delete="showDelete">
            <ion-item class="item-balanced item-icon-left" ng-show="cupom.value != null">
                <span class="icon ion-close" ng-click="removeCupom()"></span>
                <strong>Cupom</strong>
                <span class="badge badge-balanced">- R$ {{ cupom.value }}</span>
            </ion-item>
            <ion-item ng-repeat="p in items" ng-click="openProductDetail($index)">
                <h2>{{ p.name }}</h2>
                <div class="row">
                    <div class="col">
                        Qtd. {{ p.qtd }} <br/>
                        <i class="ion ion-cash"> {{ p.price }}</i>
                    </div>
                    <div class="col text-right">
                        <i class="ion ion-social-usd"> {{ p.qtd * p.price }}</i>
                    </div>
                </div>
                <ion-delete-button class="ion ion-minus-circled" ng-click="removeItem($index)"></ion-delete-button>
            </ion-item>
        </ion-list>
        <button type="button" class="button button-balanced button-full"
                ng-disabled="cupom.value != null || total == 0" ng-click="readBarCode()">
            Adicionar cupom
        </button>
        <button type="button" class="button button-assertive button-full" ng-click="save()">
            Finalizar Pedido
        </button>
    </ion-content>
</ion-view>